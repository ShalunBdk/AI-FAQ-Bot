# docker-compose.override.yml.example
#
# Этот файл содержит настройки для локальной разработки.
# Скопируйте его в docker-compose.override.yml для использования:
# cp docker-compose.override.yml.example docker-compose.override.yml
#
# docker-compose.override.yml автоматически применяется поверх docker-compose.yml

services:
  # Telegram бот - настройки для разработки
  telegram-bot:
    # Монтируем код напрямую для hot-reload
    volumes:
      - .:/app
      - ./faq_database.db:/app/faq_database.db
      - ./chroma_db:/app/chroma_db
    # Изменяем команду на auto-reload режим
    # command: watchmedo auto-restart -d . -p '*.py' -- python bot.py
    # Устанавливаем уровень логирования DEBUG
    environment:
      - LOG_LEVEL=DEBUG

  # Web админка - настройки для разработки
  web-admin:
    volumes:
      - .:/app
      - ./faq_database.db:/app/faq_database.db
      - ./chroma_db:/app/chroma_db
      - ./templates:/app/templates
    # Flask в debug режиме (с auto-reload)
    environment:
      - FLASK_ENV=development
      - FLASK_DEBUG=1
      - LOG_LEVEL=DEBUG
    # Для Flask debug режима нужен другой запуск
    # command: flask run --host=0.0.0.0 --port=5000 --reload

  # Bitrix24 бот - настройки для разработки
  bitrix24-bot:
    volumes:
      - .:/app
      - ./faq_database.db:/app/faq_database.db
      - ./chroma_db:/app/chroma_db
    environment:
      - LOG_LEVEL=DEBUG
