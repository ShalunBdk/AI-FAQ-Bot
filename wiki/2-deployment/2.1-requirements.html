<h1 style="font-size: 32px; font-weight: bold; margin: 11px 0;">2.1 Требования и подготовка</h1>

<h2 style="font-size: 24px; font-weight: bold; margin: 12px 0;">Минимальные требования к серверу</h2>
<table style="border-collapse: collapse; width: 100%; margin: 16px 0;">
    <thead>
        <tr style="background-color: #f6f8fa;">
            <th style="border: 1px solid #d0d7de; padding: 8px 12px; text-align: left;">Параметр</th>
            <th style="border: 1px solid #d0d7de; padding: 8px 12px; text-align: left;">Минимум</th>
            <th style="border: 1px solid #d0d7de; padding: 8px 12px; text-align: left;">Рекомендуется</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">CPU</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">2 ядра</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">4 ядра</td>
        </tr>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">RAM</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">4 GB</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">8 GB</td>
        </tr>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Диск</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">20 GB SSD</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">50 GB SSD</td>
        </tr>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">ОС</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;" colspan="2">Ubuntu 22.04+ / Debian 11+ / Windows Server 2019+</td>
        </tr>
    </tbody>
</table>

<p style="margin: 16px 0; line-height: 1.6; color: #24292e;"><strong style="font-weight: bold;">Важно:</strong> При первом запуске загружается семантическая модель (~500 MB). После загрузки она кэшируется в Docker volume.</p>

<h2 style="font-size: 24px; font-weight: bold; margin: 12px 0;">Необходимое ПО</h2>
<ul style="padding-left: 24px; list-style-type: disc;">
    <li style="margin: 8px 0;"><strong style="font-weight: bold;">Docker</strong> версии 20.10+</li>
    <li style="margin: 8px 0;"><strong style="font-weight: bold;">Docker Compose</strong> версии 2.0+ (или docker-compose v1.29+)</li>
    <li style="margin: 8px 0;"><strong style="font-weight: bold;">Git</strong> для клонирования репозитория</li>
</ul>

<h3 style="font-size: 19px; font-weight: bold; margin: 14px 0;">Установка Docker (Ubuntu)</h3>
<pre style="background-color: #f6f8fa; padding: 10px; border-radius: 4px; overflow: auto; margin: 16px 0;"><code style="font-family: Consolas, 'Courier New', monospace; font-size: 14px; color: #24292e; background-color: unset;"># Установка Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# Добавление пользователя в группу docker
sudo usermod -aG docker $USER

# Перелогиниться или выполнить
newgrp docker

# Проверка
docker --version
docker compose version</code></pre>

<h2 style="font-size: 24px; font-weight: bold; margin: 12px 0;">Сетевые требования</h2>
<table style="border-collapse: collapse; width: 100%; margin: 16px 0;">
    <thead>
        <tr style="background-color: #f6f8fa;">
            <th style="border: 1px solid #d0d7de; padding: 8px 12px; text-align: left;">Порт</th>
            <th style="border: 1px solid #d0d7de; padding: 8px 12px; text-align: left;">Направление</th>
            <th style="border: 1px solid #d0d7de; padding: 8px 12px; text-align: left;">Назначение</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">5000/tcp</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Входящий</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Web-админка</td>
        </tr>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">5001/tcp</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Входящий</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Telegram bot reload</td>
        </tr>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">5002/tcp</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Входящий</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Bitrix24 webhook</td>
        </tr>
        <tr>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">443/tcp</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Исходящий</td>
            <td style="border: 1px solid #d0d7de; padding: 8px 12px;">Telegram API, OpenRouter API</td>
        </tr>
    </tbody>
</table>

<h2 style="font-size: 24px; font-weight: bold; margin: 12px 0;">Необходимые токены и ключи</h2>

<h3 style="font-size: 19px; font-weight: bold; margin: 14px 0;">Telegram Bot Token</h3>
<ol style="padding-left: 24px; list-style-type: decimal;">
    <li style="margin: 8px 0;">Откройте <a style="color: #0366d6; text-decoration: none;" href="https://t.me/BotFather">@BotFather</a> в Telegram</li>
    <li style="margin: 8px 0;">Отправьте команду <code style="background-color: #f6f8fa; padding: 2px 4px; border-radius: 3px; font-family: Consolas, 'Courier New', monospace; font-size: 14px;">/newbot</code></li>
    <li style="margin: 8px 0;">Следуйте инструкциям, получите токен вида <code style="background-color: #f6f8fa; padding: 2px 4px; border-radius: 3px; font-family: Consolas, 'Courier New', monospace; font-size: 14px;">123456789:ABCdefGHIjklMNOpqrsTUVwxyz</code></li>
</ol>

<h3 style="font-size: 19px; font-weight: bold; margin: 14px 0;">OpenRouter API Key (для RAG)</h3>
<ol style="padding-left: 24px; list-style-type: decimal;">
    <li style="margin: 8px 0;">Зарегистрируйтесь на <a style="color: #0366d6; text-decoration: none;" href="https://openrouter.ai">openrouter.ai</a></li>
    <li style="margin: 8px 0;">Перейдите в раздел API Keys</li>
    <li style="margin: 8px 0;">Создайте новый ключ, скопируйте (начинается с <code style="background-color: #f6f8fa; padding: 2px 4px; border-radius: 3px; font-family: Consolas, 'Courier New', monospace; font-size: 14px;">sk-or-v1-</code>)</li>
    <li style="margin: 8px 0;">Пополните баланс (для бесплатных моделей не требуется)</li>
</ol>

<h3 style="font-size: 19px; font-weight: bold; margin: 14px 0;">Bitrix24 (опционально)</h3>
<p style="margin: 16px 0; line-height: 1.6; color: #24292e;">Для интеграции с Bitrix24 потребуется:</p>
<ul style="padding-left: 24px; list-style-type: disc;">
    <li style="margin: 8px 0;">Webhook URL от администратора портала</li>
    <li style="margin: 8px 0;">Client ID и Client Secret (для OAuth)</li>
    <li style="margin: 8px 0;">Зарегистрированный бот в Bitrix24</li>
</ul>
<p style="margin: 16px 0; line-height: 1.6; color: #24292e;">Подробнее см. документацию <code style="background-color: #f6f8fa; padding: 2px 4px; border-radius: 3px; font-family: Consolas, 'Courier New', monospace; font-size: 14px;">DEPLOY-BITRIX24.md</code> в репозитории.</p>

<h2 style="font-size: 24px; font-weight: bold; margin: 12px 0;">Чек-лист перед установкой</h2>
<ul style="padding-left: 24px; list-style-type: disc;">
    <li style="margin: 8px 0;">☐ Docker и Docker Compose установлены</li>
    <li style="margin: 8px 0;">☐ Порты 5000, 5001, 5002 свободны</li>
    <li style="margin: 8px 0;">☐ Есть доступ к интернету (для Telegram API, OpenRouter)</li>
    <li style="margin: 8px 0;">☐ Telegram Bot Token получен</li>
    <li style="margin: 8px 0;">☐ OpenRouter API Key получен (если нужен RAG)</li>
</ul>

<h2 style="font-size: 24px; font-weight: bold; margin: 12px 0;">Связанные статьи</h2>
<ul style="padding-left: 24px; list-style-type: disc;">
    <li style="margin: 8px 0;">2.2 Установка через Docker</li>
    <li style="margin: 8px 0;">2.3 Первоначальная настройка</li>
</ul>
